<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.coderdream.freeapps.mapper.TopPriceMapper">

    <resultMap id="BaseResultMap" type="com.coderdream.freeapps.model.TopPrice">
        <id property="id" column="id" jdbcType="BIGINT"/>
        <result property="appId" column="app_id" jdbcType="VARCHAR"/>
        <result property="latestPrice" column="latest_price" jdbcType="DECIMAL"/>
        <result property="latestPriceDate" column="latest_price_date" jdbcType="TIMESTAMP"/>
        <result property="topPrice" column="top_price" jdbcType="DECIMAL"/>
        <result property="topPriceDate" column="top_price_date" jdbcType="TIMESTAMP"/>
        <result property="wxLatestPrice" column="wx_latest_price" jdbcType="DECIMAL"/>
        <result property="wxLatestPriceDate" column="wx_latest_price_date" jdbcType="TIMESTAMP"/>
        <result property="wxTopPrice" column="wx_top_price" jdbcType="DECIMAL"/>
        <result property="wxTopPriceDate" column="wx_top_price_date" jdbcType="TIMESTAMP"/>
        <result property="priceCn" column="price_cn" jdbcType="INTEGER"/>
        <result property="priceUs" column="price_us" jdbcType="DECIMAL"/>
        <result property="priceStr" column="price_str" jdbcType="VARCHAR"/>
        <result property="priceStrCn" column="price_str_cn" jdbcType="VARCHAR"/>
        <result property="priceStrUs" column="price_str_us" jdbcType="VARCHAR"/>
        <result property="usFlag" column="us_flag" jdbcType="TINYINT"/>
        <result property="inPurchaseFlag" column="in_purchase_flag" jdbcType="TINYINT"/>
        <result property="inPurchaseFreeFlag" column="in_purchase_free_flag" jdbcType="TINYINT"/>
        <result property="urlCn" column="url_cn" jdbcType="VARCHAR"/>
        <result property="urlUs" column="url_us" jdbcType="VARCHAR"/>
        <result property="appInPurchase" column="app_in_purchase" jdbcType="OTHER"/>
        <result property="versionHistory" column="version_history" jdbcType="OTHER"/>
        <result property="remark" column="remark" jdbcType="VARCHAR"/>
        <result property="deleteFlag" column="delete_flag" jdbcType="INTEGER"/>
        <result property="createUserCode" column="create_user_code" jdbcType="VARCHAR"/>
        <result property="createUserName" column="create_user_name" jdbcType="VARCHAR"/>
        <result property="createdDate" column="created_date" jdbcType="TIMESTAMP"/>
        <result property="lastModifiedCode" column="last_modified_code" jdbcType="VARCHAR"/>
        <result property="lastModifiedName" column="last_modified_name" jdbcType="VARCHAR"/>
        <result property="lastModifiedDate" column="last_modified_date" jdbcType="TIMESTAMP"/>
        <result property="version" column="version" jdbcType="VARCHAR"/>
    </resultMap>

    <sql id="Base_Column_List">
        id
        ,app_id,latest_price,latest_price_date,top_price,top_price_date,
        price_cn,price_us,price_str,
        price_str_cn,price_str_us,us_flag,
        in_purchase_flag,in_purchase_free_flag,url_cn,
        url_us,app_in_purchase,version_history,
        remark,delete_flag,create_user_code,
        create_user_name,created_date,last_modified_code,
        last_modified_name,last_modified_date,version
    </sql>

    <insert id="insertOrUpdateBatch">
        insert into t_top_price
        (`app_id`,
        `latest_price`,
        `latest_price_date`,
        `top_price`,
        `top_price_date`,
        `wx_latest_price`,
        `wx_latest_price_date`,
        `wx_top_price`,
        `wx_top_price_date`,
        `price_cn`,
        `price_us`,
        `price_str`,
        `price_str_cn`,
        `price_str_us`,
        `us_flag`,
        `in_purchase_flag`,
        `in_purchase_free_flag`,
        `url_cn`,
        `url_us`,
        `app_in_purchase`,
        `version_history`,
        `remark`,
        `delete_flag`,
        `create_user_code`,
        `create_user_name`,
        `created_date`,
        `last_modified_code`,
        `last_modified_name`,
        `last_modified_date`,
        `version`)
        values
        <foreach collection="entities" item="item" separator=",">
            (
            #{item.appId,jdbcType=VARCHAR},
            #{item.latestPrice,jdbcType=DECIMAL},
            #{item.latestPriceDate,jdbcType=TIMESTAMP},
            #{item.topPrice,jdbcType=DECIMAL},
            #{item.topPriceDate,jdbcType=TIMESTAMP},
            #{item.wxLatestPrice,jdbcType=DECIMAL},
            #{item.wxLatestPriceDate,jdbcType=TIMESTAMP},
            #{item.wxTopPrice,jdbcType=DECIMAL},
            #{item.wxTopPriceDate,jdbcType=TIMESTAMP},
            #{item.priceCn,jdbcType=NUMERIC},
            #{item.priceUs,jdbcType=DECIMAL},
            #{item.priceStr,jdbcType=VARCHAR},
            #{item.priceStrCn,jdbcType=VARCHAR},
            #{item.priceStrUs,jdbcType=VARCHAR},
            #{item.usFlag,jdbcType=NUMERIC},
            #{item.inPurchaseFlag,jdbcType=NUMERIC},
            #{item.inPurchaseFreeFlag,jdbcType=NUMERIC},
            #{item.urlCn,jdbcType=VARCHAR},
            #{item.urlUs,jdbcType=VARCHAR},
            #{item.appInPurchase, typeHandler=com.baomidou.mybatisplus.extension.handlers.JacksonTypeHandler},
            #{item.versionHistory, typeHandler=com.baomidou.mybatisplus.extension.handlers.JacksonTypeHandler},
            #{item.remark,jdbcType=VARCHAR},
            #{item.deleteFlag,jdbcType=NUMERIC},
            #{item.createUserCode,jdbcType=VARCHAR},
            #{item.createUserName,jdbcType=VARCHAR},
            #{item.createdDate,jdbcType=TIMESTAMP},
            #{item.lastModifiedCode,jdbcType=VARCHAR},
            #{item.lastModifiedName,jdbcType=VARCHAR},
            #{item.lastModifiedDate,jdbcType=TIMESTAMP},
            #{item.version,jdbcType=VARCHAR}
            )
        </foreach>
        on duplicate key update
        `latest_price`=values(`latest_price`),
        `latest_price_date`=values(`latest_price_date`),
        `top_price`=values(`top_price`),
        `top_price_date`=values(`top_price_date`),
        `wx_latest_price`=values(`wx_latest_price`),
        `wx_latest_price_date`=values(`wx_latest_price_date`),
        `wx_top_price`=values(`wx_top_price`),
        `wx_top_price_date`=values(`wx_top_price_date`),
        `price_cn`=values(`price_cn`),
        `price_us`=values(`price_us`),
        `price_str`=values(`price_str`),
        `price_str_cn`=values(`price_str_cn`),
        `price_str_us`=values(`price_str_us`),
        `us_flag`=values(`us_flag`),
        `in_purchase_flag`=values(`in_purchase_flag`),
        `in_purchase_free_flag`=values(`in_purchase_free_flag`),
        `url_cn`=values(`url_cn`),
        `url_us`=values(`url_us`),
        `app_in_purchase`=values(`app_in_purchase`),
        `version_history`=values(`version_history`),
        `remark`=values(`remark`),
        `delete_flag`=values(`delete_flag`),
        `create_user_code`=values(`create_user_code`),
        `create_user_name`=values(`create_user_name`),
        `created_date`=values(`created_date`),
        `last_modified_code`=values(`last_modified_code`),
        `last_modified_name`=values(`last_modified_name`),
        `last_modified_date`=values(`last_modified_date`),
        `version`=values(`version`)
    </insert>
</mapper>
