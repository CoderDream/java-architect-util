# 第9章　class与style绑定

在Vue中，操作元素的class列表和内联样式是数据绑定的一个常见需求。因为它们都是属性，所以可以用v-bind进行处理：只需要通过表达式计算出字符串结果即可。不过，字符串拼接麻烦且易出错。因此，在将v-bind用于class和style时，Vue.js做了专门的增强。表达式结果的类型除了字符串之外，还可以是对象或数组。本章将讲解class和style的用法。

## 9.1　绑定HTML样式（class）

在Vue中，动态的样式类在“v-on:class”中定义，静态的类名写在class样式中。9.1.1　数组语法Vue中提供了使用数组进行绑定样式的方式，可以直接在数组中写上样式的类名。提示如果不使用单引号包裹类名，其实代表的还是一个变量的名称，会出现错误信息。【例9.1】class数组语法（源代码\ch09\9.1.html）。[插图]在浏览器中运行程序，打开控制台，可以看到渲染的样式，如图9-1所示。





[插图]图9-1　数组语法渲染结果如果想要以变量的方式定义样式，就需要先定义好这个变量。示例中的样式与上例样式相同。[插图]在数组语法中，还可以使用对象语法，根据值的真假来控制样式是否使用。[插图]在浏览器中运行程序，渲染结果和上面示例相同（见图9-1）。9.1.2　对象语法



在上面小节的最后提到过，在数组中可以使用对象的形式来设置样式，在Vue中也可以直接使用对象的形式来设置样式。对象的属性为样式的类名，value则为true或者false，当值为true时显示样式。由于对象的属性可以带引号，也可不带引号，所以属性就按照自己的习惯写法就可以了。【例9.2】Class对象语法（源代码\ch09\9.2.html）。[插图]在浏览器中运行程序，打开控制台，可以看到渲染的结果，如图9-2所示。[插图]图9-2　Class对象语法



当class1或class2变化时，class列表将相应地更新。例如，class2的值变更为false，代码如下。【例9.3】class2的值变更为false（源代码\ch09\9.3.html）。[插图]在浏览器中运行程序，打开控制台，可以看到渲染的结果，如图9-3所示。[插图]图9-3　渲染结果当对象中的属性过多时，如果还是全部写到元素上时，势必会显得比较繁琐。这时可以在元素上只写上对象变量，在Vue实例中进行定义。【例9.4】在元素上只写上对象变量（源代码\ch09\9.4.html）。[插图]



在浏览器中运行程序，渲染的结果如图9-4所示。[插图]图9-4　对象语法效果也可以绑定一个返回对象的计算属性，这是一个常用且强大的模式，示例代码如下：[插图]在浏览器中运行程序，渲染的结果和上面示例相同（见图9-4）。9.1.3　用在组件上当在一个自定义组件上使用class属性时，这些类将被添加到该组件的根元素上面，这个元素上已经存在的类不会被覆盖。



例如，声明组件my-component如下：[插图]然后在使用它的时候添加一些class样式style3和style4：[插图]HTML将被渲染为：[插图]对于带数据绑定的class也同样适用：[插图]当isActive为Truthy时，HTML将被渲染成为：[插图]提示在JavaScript中，Truthy（真值）指的是在布尔值上下文中转换后的值为真的值。所有值都是真值，除非它们被定义为falsy（即除了false、0、""、null、undefined和NaN外）。

## 9.2　绑定内联样式（style）

内联样式是将CSS样式编写到元素的style属性中。9.2.1　对象语法与使用属性为元素设置class样式相同，在Vue中也可以使用对象的方式为元素设置style样式。v-bind:style的对象语法十分直观——看着非常像CSS，但其实是一个JavaScript对象。CSS属性名可以用驼峰式（camelCase）或短横线分隔（kebab-case，记得用引号包裹起来）来命名。【例9.5】style对象语法（源代码\ch09\9.5.html）。[插图]



在浏览器中运行程序，打开控制台，渲染结果如图9-5所示。[插图]图9-5　style对象语法也可以在Vue实例对象中定义属性，用来代替样式属性，例如下面的示例代码：[插图]在浏览器中运行效果和上例相同（见图9-5）。同样地，可以直接绑定一个样式对象变量，这样的代码看起来也会更简洁美观。[插图]在浏览器里面运行，打开控制台，渲染结果和上面示例相同（见图9-5）。



同样地，对象语法常常结合返回对象的计算属性使用。[插图]在浏览器中运行程序，渲染的结果如图9-6所示。[插图]图9-6　style对象语法9.2.2　数组语法v-bind:style的数组语法可以将多个样式对象应用到同一个元素上，样式对象可以是data中定义的样式对象和计算属性中return的对象。【例9.6】style数组语法（源代码\ch09\9.6.html）。[插图]



在浏览器中运行程序，打开控制台，渲染结果如图9-7所示。[插图]图9-7　style数组语法提示当v-bind:style使用需要添加浏览器引擎前缀的CSS属性时，比如transform，Vue.js会自动侦测并添加相应的前缀。

## 9.3　综合案例——设计隔行变色的商品表

该案例主要是设计隔行变色的商品表，针对奇偶行应用不同的样式，然后通过v-for指令循环输出表格中的商品数据。

【例9.7】style数组语法（源代码\ch09\9.7.html）。

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>隔行变色的商品表</title>
    <style>
        body {
            width: 600px;
        }

        table {
            border: 2px solid black;
        }

        table {
            width: 100%;
        }

        th {
            height: 50px;
        }

        th, td {
            border-bottom: 1px solid black;
            text-align: center;
        }

        [v-cloak] {
            display: none;
        }

        .even {
            background-color: #7AFEC6;
        }
    </style>
</head>
<body>
<div id="app" v-cloak>
    <table>
        <tr>
            <th>编号</th>
            <th>名称</th>
            <th>库存</th>
            <th>价格</th>
            <th>产地</th>
        </tr>
        <tr v-for="(goods, index) in goodss"
            :key="goods.id" :class="{even : (index+1) % 2 === 0}">
            <td>{{ goods.id }}</td>
            <td>{{ goods.title }}</td>
            <td>{{ goods.num }}</td>
            <td>{{ goods.price }}</td>
            <td>{{ goods.city }}</td>
        </tr>
    </table>
</div>
<script src="https://unpkg.com/vue@next"></script>
<script>
    const vm = Vue.createApp({
        data() {
            return {
                goodss: [
                    {
                        id: 1,
                        title: '洗衣机',
                        num: '2800台',
                        price: 188,
                        city: '北京'
                    },
                    {
                        id: 2,
                        title: '电视机',
                        num: '2600台',
                        price: 188,
                        city: '广州'
                    },
                    {
                        id: 3,
                        title: '冰箱',
                        num: '5400台',
                        price: 188,
                        city: '上海'
                    },
                    {
                        id: 4,
                        title: '空调',
                        num: '1800台',
                        price: 188,
                        city: '北京'
                    }
                ]
            }
        },
        methods: {
            deleteItem(index) {
                this.goodss.splice(index, 1);
            }
        }
    }).mount('#app');
</script>
</body>
</html>
```

在浏览器中运行程序，效果如图9-8所示。

[插图]

图9-8　隔行变色的商品表

## 9.4　疑难解惑

疑问1：Vue.js如何处理浏览器不支持的样式属性？

CSS3中的一些样式属性并不被所有的浏览器所支持，比如transform属性，该属性可以对网页元素进行旋转、缩放、移动或倾斜操作。在应用这些属性时，针对不同的浏览器，需要添加该浏览器的内核引擎前缀。Vue.js会自动侦测并添加前缀，非常方便。

疑问2：可以为style绑定中的属性提供多个值吗？

从Vue.js 2.3.0版本开始，用户可以为style绑定的属性提供一个包含多个值的数组，这常用于提供多个带前缀的值。例如：

[插图]

上述代码只会渲染数组中最后一个被浏览器支持的值。



































