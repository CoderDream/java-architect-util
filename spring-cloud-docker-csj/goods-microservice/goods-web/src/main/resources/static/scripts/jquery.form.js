/*
 * jQuery Form Plugin
 * version: 2.72 (28-APR-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(B){B.fn.ajaxSubmit=function(C){if(!this.length){A("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof C=="function"){C={success:C}}var F=this.attr("action");var H=(typeof F==="string")?B.trim(F):"";if(H){H=(H.match(/^([^#]+)/)||[])[1]}H=H||window.location.href||"";C=B.extend(true,{url:H,success:B.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},C);var O={};this.trigger("form-pre-serialize",[this,C,O]);if(O.veto){A("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(C.beforeSerialize&&C.beforeSerialize(this,C)===false){A("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var G,Q,I=this.formToArray(C.semantic);if(C.data){C.extraData=C.data;for(G in C.data){if(C.data[G] instanceof Array){for(var D in C.data[G]){I.push({name:G,value:C.data[G][D]})}}else{Q=C.data[G];Q=B.isFunction(Q)?Q():Q;I.push({name:G,value:Q})}}}if(C.beforeSubmit&&C.beforeSubmit(I,this,C)===false){A("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[I,this,C,O]);if(O.veto){A("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var M=B.param(I);if(C.type.toUpperCase()=="GET"){C.url+=(C.url.indexOf("?")>=0?"&":"?")+M;C.data=null}else{C.data=M}var K=this,J=[];if(C.resetForm){J.push(function(){K.resetForm()})}if(C.clearForm){J.push(function(){K.clearForm()})}if(!C.dataType&&C.target){var N=C.success||function(){};J.push(function(T){var S=C.replaceTarget?"replaceWith":"html";B(C.target)[S](T).each(N,arguments)})}else{if(C.success){J.push(C.success)}}C.success=function(X,T,W){var S=C.context||C;for(var U=0,V=J.length;U<V;U++){J[U].apply(S,[X,T,W||K,K])}};var P=B("input:file",this).length>0;var L="multipart/form-data";var R=(K.attr("enctype")==L||K.attr("encoding")==L);if(C.iframe!==false&&(P||C.iframe||R)){if(C.closeKeepAlive){B.get(C.closeKeepAlive,E)}else{E()}}else{B.ajax(C)}this.trigger("form-submit-notify",[this,C]);return this;function E(){var T=K[0];if(B(":input[name=submit],:input[id=submit]",T).length){alert('Error: Form elements must not have name or id of "submit".');return}var X=B.extend(true,{},B.ajaxSettings,C);X.context=X.context||X;var V="jqFormIO"+(new Date().getTime()),f="_"+V;var W=B('<iframe id="'+V+'" name="'+V+'" src="'+X.iframeSrc+'" />');var j=W[0];W.css({position:"absolute",top:"-1000px",left:"-1000px"});var h={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(g){var n=(g==="timeout"?"timeout":"aborted");A("aborting upload... "+n);this.aborted=1;W.attr("src",X.iframeSrc);h.error=n;X.error&&X.error.call(X.context,h,n,n);i&&B.event.trigger("ajaxError",[h,X,n]);X.complete&&X.complete.call(X.context,h,n)}};var i=X.global;if(i&&!B.active++){B.event.trigger("ajaxStart")}if(i){B.event.trigger("ajaxSend",[h,X])}if(X.beforeSend&&X.beforeSend.call(X.context,h,X)===false){if(X.global){B.active--}return}if(h.aborted){return}var l=0,e;var o=T.clk;if(o){var b=o.name;if(b&&!o.disabled){X.extraData=X.extraData||{};X.extraData[b]=o.value;if(o.type=="image"){X.extraData[b+".x"]=T.clk_x;X.extraData[b+".y"]=T.clk_y}}}function S(){var p=K.attr("target"),q=K.attr("action");T.setAttribute("target",V);if(T.getAttribute("method")!="POST"){T.setAttribute("method","POST")}if(T.getAttribute("action")!=X.url){T.setAttribute("action",X.url)}if(!X.skipEncodingOverride){K.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(X.timeout){e=setTimeout(function(){l=true;d(true)},X.timeout)}var r=[];try{if(X.extraData){for(var g in X.extraData){r.push(B('<input type="hidden" name="'+g+'" value="'+X.extraData[g]+'" />').appendTo(T)[0])}}W.appendTo("body");j.attachEvent?j.attachEvent("onload",d):j.addEventListener("load",d,false);T.submit()}finally{T.setAttribute("action",q);if(p){T.setAttribute("target",p)}else{K.removeAttr("target")}B(r).remove()}}if(X.forceSync){S()}else{setTimeout(S,10)}var Z,U,m=50,c;function d(r){if(h.aborted||c){return}if(r===true&&h){h.abort("timeout");return}var u=j.contentWindow?j.contentWindow.document:j.contentDocument?j.contentDocument:j.document;if(!u||u.location.href==X.iframeSrc){if(!l){return}}j.detachEvent?j.detachEvent("onload",d):j.removeEventListener("load",d,false);var t=true;try{if(l){throw"timeout"}var p=X.dataType=="xml"||u.XMLDocument||B.isXMLDoc(u);A("isXml="+p);if(!p&&window.opera&&(u.body==null||u.body.innerHTML=="")){if(--m){A("requeing onLoad callback, DOM not available");setTimeout(d,250);return}}h.responseText=u.body?u.body.innerHTML:u.documentElement?u.documentElement.innerHTML:null;h.responseXML=u.XMLDocument?u.XMLDocument:u;if(!h.responseText&&h.responseXML&&!X.dataType){X.dataType="xml"}h.getResponseHeader=function(w){var v={"content-type":X.dataType};return v[w]};var g=/(json|script|text)/.test(X.dataType);if(g||X.textarea){var s=u.getElementsByTagName("textarea")[0];if(s){h.responseText=s.value}else{if(g){var q=u.getElementsByTagName("pre")[0];var n=u.getElementsByTagName("body")[0];if(q){h.responseText=q.textContent}else{if(n){h.responseText=n.innerHTML}}}}}else{if(X.dataType=="xml"&&!h.responseXML&&h.responseText!=null){h.responseXML=k(h.responseText)}}Z=Y(h,X.dataType,X)}catch(r){A("error caught:",r);t=false;h.error=r;X.error&&X.error.call(X.context,h,"error",r);i&&B.event.trigger("ajaxError",[h,X,r])}if(h.aborted){A("upload aborted");t=false}if(t){X.success&&X.success.call(X.context,Z,"success",h);i&&B.event.trigger("ajaxSuccess",[h,X])}i&&B.event.trigger("ajaxComplete",[h,X]);if(i&&!--B.active){B.event.trigger("ajaxStop")}X.complete&&X.complete.call(X.context,h,t?"success":"error");c=true;if(X.timeout){clearTimeout(e)}setTimeout(function(){W.removeData("form-plugin-onload");W.remove();h.responseXML=null},100)}var k=B.parseXML||function(g,n){if(window.ActiveXObject){n=new ActiveXObject("Microsoft.XMLDOM");n.async="false";n.loadXML(g)}else{n=(new DOMParser()).parseFromString(g,"text/xml")}return(n&&n.documentElement&&n.documentElement.nodeName!="parsererror")?n:null};var a=B.parseJSON||function(g){return window["eval"]("("+g+")")};var Y=function(r,p,g){var q=r.getResponseHeader("content-type")||"",n=p==="xml"||!p&&q.indexOf("xml")>=0,t=n?r.responseXML:r.responseText;if(n&&t.documentElement.nodeName==="parsererror"){B.error&&B.error("parsererror")}if(g&&g.dataFilter){t=g.dataFilter(t,p)}if(typeof t==="string"){if(p==="json"||!p&&q.indexOf("json")>=0){t=a(t)}else{if(p==="script"||!p&&q.indexOf("javascript")>=0){B.globalEval(t)}}}return t}}};B.fn.ajaxForm=function(D){if(this.length===0){var C={s:this.selector,c:this.context};if(!B.isReady&&C.s){A("DOM not ready, queuing ajaxForm");B(function(){B(C.s,C.c).ajaxForm(D)});return this}A("terminating; zero elements found by selector"+(B.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(E){if(!E.isDefaultPrevented()){E.preventDefault();B(this).ajaxSubmit(D)}}).bind("click.form-plugin",function(I){var G=I.target;var E=B(G);if(!(E.is(":submit,input:image"))){var J=E.closest(":submit");if(J.length==0){return}G=J[0]}var H=this;H.clk=G;if(G.type=="image"){if(I.offsetX!=undefined){H.clk_x=I.offsetX;H.clk_y=I.offsetY}else{if(typeof B.fn.offset=="function"){var F=E.offset();H.clk_x=I.pageX-F.left;H.clk_y=I.pageY-F.top}else{H.clk_x=I.pageX-G.offsetLeft;H.clk_y=I.pageY-G.offsetTop}}}setTimeout(function(){H.clk=H.clk_x=H.clk_y=null},100)})};B.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};B.fn.formToArray=function(M){var H=[];if(this.length===0){return H}var F=this[0];var G=M?F.getElementsByTagName("*"):F.elements;if(!G){return H}var C,D,O,N,J,L,I;for(C=0,L=G.length;C<L;C++){J=G[C];O=J.name;if(!O){continue}if(M&&F.clk&&J.type=="image"){if(!J.disabled&&F.clk==J){H.push({name:O,value:B(J).val()});H.push({name:O+".x",value:F.clk_x},{name:O+".y",value:F.clk_y})}continue}N=B.fieldValue(J,true);if(N&&N.constructor==Array){for(D=0,I=N.length;D<I;D++){H.push({name:O,value:N[D]})}}else{if(N!==null&&typeof N!="undefined"){H.push({name:O,value:N})}}}if(!M&&F.clk){var E=B(F.clk),K=E[0];O=K.name;if(O&&!K.disabled&&K.type=="image"){H.push({name:O,value:E.val()});H.push({name:O+".x",value:F.clk_x},{name:O+".y",value:F.clk_y})}}return H};B.fn.formSerialize=function(C){return B.param(this.formToArray(C))};B.fn.fieldSerialize=function(C){var D=[];this.each(function(){var E=this.name;if(!E){return}var F=B.fieldValue(this,C);if(F&&F.constructor==Array){for(var G=0,H=F.length;G<H;G++){D.push({name:E,value:F[G]})}}else{if(F!==null&&typeof F!="undefined"){D.push({name:this.name,value:F})}}});return B.param(D)};B.fn.fieldValue=function(C){for(var H=[],F=0,G=this.length;F<G;F++){var D=this[F];var E=B.fieldValue(D,C);if(E===null||typeof E=="undefined"||(E.constructor==Array&&!E.length)){continue}E.constructor==Array?B.merge(H,E):H.push(E)}return H};B.fieldValue=function(H,C){var D=H.name,N=H.type,I=H.tagName.toLowerCase();if(C===undefined){C=true}if(C&&(!D||H.disabled||N=="reset"||N=="button"||(N=="checkbox"||N=="radio")&&!H.checked||(N=="submit"||N=="image")&&H.form&&H.form.clk!=H||I=="select"&&H.selectedIndex==-1)){return null}if(I=="select"){var G=H.selectedIndex;if(G<0){return null}var F=[],J=H.options;var E=(N=="select-one");var K=(E?G+1:J.length);for(var M=(E?G:0);M<K;M++){var O=J[M];if(O.selected){var L=O.value;if(!L){L=(O.attributes&&O.attributes["value"]&&!(O.attributes["value"].specified))?O.text:O.value}if(E){return L}F.push(L)}}return F}return B(H).val()};B.fn.clearForm=function(){return this.each(function(){B("input,select,textarea",this).clearFields()})};B.fn.clearFields=B.fn.clearInputs=function(){return this.each(function(){var D=this.type,C=this.tagName.toLowerCase();if(D=="text"||D=="password"||C=="textarea"){this.value=""}else{if(D=="checkbox"||D=="radio"){this.checked=false}else{if(C=="select"){this.selectedIndex=-1}}}})};B.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};B.fn.enable=function(C){if(C===undefined){C=true}return this.each(function(){this.disabled=!C})};B.fn.selected=function(C){if(C===undefined){C=true}return this.each(function(){var E=this.type;if(E=="checkbox"||E=="radio"){this.checked=C}else{if(this.tagName.toLowerCase()=="option"){var D=B(this).parent("select");if(C&&D[0]&&D[0].type=="select-one"){D.find("option").selected(false)}this.selected=C}}})};function A(){if(B.fn.ajaxSubmit.debug){var C="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(C)}else{if(window.opera&&window.opera.postError){window.opera.postError(C)}}}}})(jQuery);